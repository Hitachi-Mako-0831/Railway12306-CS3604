# 1. 用户登录功能需求

## 1.1 登录页面布局与视觉规范

### 1.1.1 页面整体结构
- **背景**：页面采用纯白色背景。
- **布局**：采用三段式垂直布局，自上而下依次为顶部导航区、核心登录区和页脚区。

### 1.1.2 顶部导航区
- **品牌标识**：位于页面左上角，包含中国铁路官方Logo及“中国铁路12306”和“12306 CHINA RAILWAY”字样，点击该区域可导航至应用首页。
- **欢迎语**：紧邻品牌标识右侧，展示静态文本“欢迎登录12306”。

### 1.1.3 核心登录区
- **背景**：采用官方APP宣传图作为背景，以提升品牌形象。
- **登录表单**：表单嵌入宣传背景图的右侧，包含以下控件：
  - “账号登录”标题，选中时高亮显示。
  - “用户名/邮箱/手机号”输入框。
  - “密码”输入框，输入内容以掩码（黑色圆点）形式显示。
  - “立即登录”主操作按钮。
  - 提供“注册12306账户”和“忘记密码？”的辅助链接。

### 1.1.4 页脚区
- **内容**：页脚左侧为友情链接集合，右侧陈列四个官方社交媒体平台的二维码矩阵。

---

## 1.2 登录信息提交与验证

### 1.2.1 输入为空校验
**Scenario**: 用户未输入凭证信息提交登录
- **Given**: 用户位于登录页面。
- **When**: 用户在未输入任何账户信息的情况下点击“立即登录”。
- **Then**: 系统应在登录按钮上方显示提示：“请输入用户名！”

**Scenario**: 用户仅输入账户信息但未输入密码
- **Given**: 用户位于登录页面，并已填写账户信息。
- **When**: 用户在未输入密码的情况下点击“立即登录”。
- **Then**: 系统应在登录按钮上方显示提示：“请输入密码！”

### 1.2.2 密码长度校验
**Scenario**: 用户输入的密码长度不足
- **Given**: 用户已填写账户信息及一个长度小于6位的密码。
- **When**: 用户点击“立即登录”。
- **Then**: 系统应提示：“密码长度不能少于6位！”

### 1.2.3 账户与密码匹配性校验
**Scenario**: 用户使用有效的用户名和正确的密码登录
- **Given**: 用户输入了已注册的用户名及与之匹配的正确密码。
- **When**: 用户点击“立即登录”。
- **Then**: 系统应在页面中央弹出“短信验证”模态框。

**Scenario**: 用户使用未注册的账户信息登录
- **Given**: 用户输入的账户信息（用户名、邮箱或手机号）在数据库中不存在。
- **When**: 用户点击“立即登录”。
- **Then**: 系统应提示“用户名或密码错误！”，并清空密码输入框。

**Scenario**: 用户使用已注册的账户和错误的密码登录
- **Given**: 用户输入了已注册的账户信息，但密码与数据库记录不匹配。
- **When**: 用户点击“立即登录”。
- **Then**: 系统应提示“用户名或密码错误！”，并清空密码输入框。

**Scenario**: 用户使用有效的邮箱和正确的密码登录
- **Given**: 用户输入了已注册的邮箱地址及与之匹配的正确密码。
- **When**: 用户点击“立即登录”。
- **Then**: 系统应弹出“短信验证”模态框。

**Scenario**: 用户使用有效的手机号和正确的密码登录
- **Given**: 用户输入了已注册的手机号码及与之匹配的正确密码。
- **When**: 用户点击“立即登录”。
- **Then**: 系统应弹出“短信验证”模态框。

---

# 2. 短信二次验证功能

## 2.1 短信验证模态框界面
- **位置与尺寸**：模态框应在页面居中显示，尺寸约为登录页面的30%。
- **顶部栏**：包含标题“选择验证方式”及一个关闭按钮（“x”）。
- **核心内容**：
  - “短信验证”主标题。
  - “请输入登录账号绑定的证件号后4位”输入框，限制输入长度为4位。
  - “输入验证码”输入框（限制6位）及“获取验证码”按钮。
  - “确定”主操作按钮。

### 2.1.1 “获取验证码”按钮状态管理
- **状态一（禁用）**: 按钮背景灰色，文本为“获取验证码”，不可点击。此为初始状态。
- **状态二（可用）**: 按钮背景白色，文本为“获取验证码”，可点击。当证件号后4位输入框被填满时，按钮切换至此状态。
- **状态三（冷却中）**: 按钮背景灰色，文本为“重新发送(XXs)”，不可点击。点击后进入60秒倒计时，结束后返回状态一或状态二。

## 2.2 获取验证码交互
**Scenario**: 用户输入错误的证件号后4位并请求验证码
- **Given**: 用户在短信验证模态框中，输入的证件号后4位与账户绑定信息不符。
- **When**: 用户点击“获取验证码”按钮。
- **Then**: 系统应提示“请输入正确的用户信息！”，同时“获取验证码”按钮进入冷却状态。

**Scenario**: 用户输入正确的证件号后4位并成功请求验证码
- **Given**: 用户输入的证件号后4位与账户信息匹配，且1分钟内未重复请求。
- **When**: 用户点击“获取验证码”按钮。
- **Then**: 系统向用户绑定的手机号发送验证码，并将其存入数据库。
- **And**: “获取验证码”按钮进入冷却状态，并提示“获取短信验证码成功！”

**Scenario**: 用户在1分钟内重复请求验证码
- **Given**: 用户输入了正确的证件号后4位，但在1分钟内已请求过验证码。
- **When**: 用户再次点击“获取验证码”按钮。
- **Then**: 系统应提示：“请求验证码过于频繁，请稍后再试！”

## 2.3 提交二次验证信息
**Scenario**: 用户未输入任何信息提交验证
- **Given**: 用户未填写证件号后4位及验证码。
- **When**: 用户点击“确定”按钮。
- **Then**: 系统应提示“请输入登录账号绑定的证件号后4位”。

**Scenario**: 用户未输入验证码提交验证
- **Given**: 用户已填写证件号后4位，但未填写验证码。
- **When**: 用户点击“确定”按钮。
- **Then**: 系统应提示“请输入验证码”。

**Scenario**: 用户输入的验证码格式不正确
- **Given**: 用户输入的验证码长度不足6位。
- **When**: 用户点击“确定”按钮。
- **Then**: 系统应提示“请输入正确的验证码”。

**Scenario**: 用户输入了正确的验证码
- **Given**: 用户输入的验证码与系统发送的最新验证码一致。
- **When**: 用户点击“确定”按钮。
- **Then**: 系统应提示登录成功，并自动导航至用户个人中心页面。

**Scenario**: 用户输入了错误的验证码
- **Given**: 用户输入的验证码与系统发送的最新验证码不一致。
- **When**: 用户点击“确定”按钮。
- **Then**: 系统应提示“很抱歉，您输入的短信验证码有误。”
