# 3. 用户注册功能需求

## 3.1 注册页面布局与表单规范
- **进入路径**：用户可通过首页或登录页的“注册”链接进入本页面。
- **表单控件**：页面包含用户名、登录密码、确认密码、证件类型、姓名、证件号码、优惠类型、邮箱和手机号码等输入字段。
- **必填项标识**：除邮箱外，所有字段均为必填项，并以星号（*）明确标识。
- **下拉菜单**：
  - **证件类型**：提供“居民身份证”、“港澳居民居住证”等八种选项。
  - **优惠类型**：提供“成人”、“儿童”、“学生”、“残疾军人”四种选项。
- **操作按钮**：页面底部提供一个“下一步”按钮以提交注册信息。
- **服务条款**：包含一个复选框，要求用户同意《中国铁路客户服务中心网站服务条款》和《隐私权政策》。

---

## 3.2 注册信息输入与校验

### 3.2.1 用户名校验
**Scenario**: 用户名长度不符合规范
- **Given**: 用户位于注册页面。
- **When**: 用户输入的用户名长度小于6位或大于30位。
- **Then**: 系统应提示“用户名长度应在6至30个字符之间！”

**Scenario**: 用户名格式不符合规范
- **Given**: 用户位于注册页面。
- **When**: 用户输入的用户名未使用字母开头，或包含了字母、数字、下划线以外的字符。
- **Then**: 系统应提示“用户名须以字母开头，且只能包含字母、数字和下划线！”

**Scenario**: 用户名已被占用
- **Given**: 用户输入了一个格式有效但已被其他用户注册的用户名。
- **When**: 输入框失去焦点或进行实时校验。
- **Then**: 系统应提示“该用户名已被占用，请尝试其他用户名！”

**Scenario**: 用户名有效且可用
- **Given**: 用户输入了一个格式有效且未被注册的用户名。
- **When**: 输入框失去焦点或进行实时校验。
- **Then**: 输入框右侧应显示一个成功标识（如绿色勾号）。

### 3.2.2 密码校验
**Scenario**: 密码长度不符合规范
- **Given**: 用户位于注册页面。
- **When**: 用户输入的密码长度小于6位。
- **Then**: 系统应提示“密码长度不能少于6个字符！”

**Scenario**: 密码复杂度不符合规范
- **Given**: 用户位于注册页面。
- **When**: 用户输入的密码仅包含字母、数字、下划线中的一种，或包含非法字符。
- **Then**: 系统应提示“密码须由字母、数字、下划线中的至少两种组成！”

**Scenario**: 密码有效
- **Given**: 用户输入了一个满足长度和复杂度要求的密码。
- **When**: 输入框失去焦点。
- **Then**: 输入框右侧应显示成功标识。

### 3.2.3 确认密码校验
**Scenario**: 两次输入的密码不一致
- **Given**: 用户已输入登录密码。
- **When**: 用户在确认密码框中输入了不匹配的密码。
- **Then**: 系统应提示“两次输入的密码不一致！”

**Scenario**: 两次输入的密码一致
- **Given**: 用户已输入登录密码。
- **When**: 用户在确认密码框中输入了匹配的密码。
- **Then**: 确认密码框右侧应显示成功标识。

### 3.2.4 其他字段校验与交互
- **姓名**：长度需在3-30个字符之间，且不能包含特殊字符。
- **证件号码**：需为18位，且只能包含数字和字母，并通过格式校验。
- **手机号码**：需为11位纯数字。
- **邮箱**：需符合标准的电子邮件地址格式。

---

## 3.3 提交注册与后续流程

**Scenario**: 用户未同意服务条款并提交
- **Given**: 用户已填写表单但未勾选服务条款复选框。
- **When**: 用户点击“下一步”按钮。
- **Then**: 系统应提示“请阅读并同意服务条款！”

**Scenario**: 用户未填写所有必填项并提交
- **Given**: 用户已勾选服务条款，但有必填字段为空。
- **When**: 用户点击“下一步”按钮。
- **Then**: 系统应提示“请填写所有必填信息！”

**Scenario**: 提交时存在已注册的证件号码
- **Given**: 用户填写的所有信息均有效，但所用证件号码已在系统中注册。
- **When**: 用户点击“下一步”按钮。
- **Then**: 系统应提示该证件号已被注册，并提供相应处理指引。

**Scenario**: 提交时存在已注册的手机号码
- **Given**: 用户填写的所有信息均有效，但所用手机号码已在系统中注册。
- **When**: 用户点击“下一步”按钮。
- **Then**: 系统应提示该手机号已被使用，并提供相应处理指引。

**Scenario**: 成功提交注册信息
- **Given**: 用户已完整、正确地填写所有必填字段，并同意服务条款。
- **When**: 用户点击“下一步”按钮。
- **Then**: 系统应弹出手机验证模态框。
- **And**: 系统向用户手机发送验证码，并记录该验证码以备核对。

---

## 3.4 服务条款与隐私政策页面
- **布局**：点击相应链接后，应在新页面或模态框中展示《中国铁路客户服务中心网站服务条款》或《隐私权政策》的全文。
- **风格**：页面设计应与主站保持一致。

---

## 3.5 手机验证模态框
- **界面**：模态框标题为“手机验证”，提示“验证码已发送至【手机号】”，并包含验证码输入框、“完成注册”和“返回修改”按钮。
- **交互**：
  - **Scenario**: 用户输入正确的验证码并完成注册
    - **Given**: 用户在验证模态框中输入了收到的正确验证码。
    - **When**: 用户点击“完成注册”按钮。
    - **Then**: 系统提示“恭喜您，注册成功！”，并在2秒后自动跳转至登录页面。
    - **And**: 用户的完整信息被正式写入数据库。
  - **Scenario**: 用户输入错误的验证码
    - **Given**: 用户输入了错误的验证码。
    - **When**: 用户点击“完成注册”按钮。
    - **Then**: 系统提示“验证码错误”。
  - **Scenario**: 用户返回修改信息
    - **Given**: 用户位于验证模态框。
    - **When**: 用户点击“返回修改”按钮。
    - **Then**: 验证模态框关闭，返回到注册信息填写页面。
